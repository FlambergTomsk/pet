import{_ as g,z as N,r as y,k as _,l as p,m as e,A as W,B as h,C as z,D as V,E as j,x as G,y as R,F as D,c as x,G as b,H as M,q as m,s as C,I as q,T as O,J,K,L as Q,M as E,t as u,N as L,O as F,P as k,v as S,u as A,Q as B,R as U,o as X,S as Y}from"./entry.8b80eb1f.js";const Z=s=>(G("data-v-0c428391"),s=s(),R(),s),ee={class:"switcher"},te={class:"switcher__switch"},se=Z(()=>e("span",{class:"switcher__slider"},null,-1)),ne={__name:"LocaleSwitcher",setup(s){const{locale:t}=N(),n=y(t.value==="ru"),a=i=>{t.value=i.target.checked?"ru":"en"};return(i,c)=>(_(),p("div",ee,[e("span",{class:W(["switcher__button",{switcher__button_active:h(t)==="en"}]),onClick:c[0]||(c[0]=r=>a("en"))}," Eng ",2),e("label",te,[z(e("input",{type:"checkbox","onUpdate:modelValue":c[1]||(c[1]=r=>j(n)?n.value=r:null),onChange:a},null,544),[[V,h(n)]]),se]),e("span",{class:W(["switcher__button",{switcher__button_active:h(t)==="ru"}]),onClick:c[2]||(c[2]=r=>a("ru"))}," Rus ",2)]))}},oe=g(ne,[["__scopeId","data-v-0c428391"]]),ce={class:"accordion__header",role:"heading"},ae={key:0,class:"accordion__title"},ie=e("div",{class:"accordion__icon"},[e("div",{class:"accordion__plus"})],-1),_e=["aria-hidden"],re={class:"accordion__content"},le={__name:"AccordionItem",setup(s,{expose:t}){const n=D("accordion"),a=y(null);let i=y(null),c=y(!1),r=x(()=>i.value==n.active||c.value);i.value=n.count++;function l(){c.value=!0,n.active=i.value}function I(){c.value=!1,n.active=null}function d(){r.value?I():l()}function v(o){o.style.height=0}function f(o){o.style.height=o.scrollHeight+"px"}function $(o){o.style.height=""}function w(o){o.style.height=o.scrollHeight+"px",J(()=>{o.style.height=0})}return t({refEl:a,open:l}),(o,T)=>(_(),p("li",{class:W(["accordion__item",[{"accordion__item--active":h(r)}]]),ref_key:"refEl",ref:a},[e("header",ce,[e("div",{class:"accordion__header-btn",onClick:d},[b(o.$slots,"custom_header"),o.$slots.custom_header?M("",!0):(_(),p("h4",ae,[b(o.$slots,"title")])),ie])]),m(O,{name:"accordion",onBeforeEnter:v,onEnter:f,onAfterEnter:$,onBeforeLeave:w},{default:C(()=>[z(e("div",{class:"accordion__slide","aria-hidden":h(r)?"false":"true",onClick:d},[e("div",re,[b(o.$slots,"default")])],8,_e),[[q,h(r)]])]),_:3})],2))}};const de={class:"accordion"},ue={__name:"Accordion",props:{active:{type:Number}},setup(s){const n=K({count:0,active:s.active});return Q("accordion",n),E(()=>n.active,a=>{n.active=a}),(a,i)=>(_(),p("ul",de,[b(a.$slots,"default")]))}},he={class:"weather-blog"},pe={__name:"WeatherBlog",setup(s){const{$t:t}=A(),n=x(()=>[{id:1,title:t("blog.stek_title"),text:t("blog.stek_text")},{id:2,title:t("blog.validation_title"),text:t("blog.validation_text")},{id:3,title:t("blog.localization_title"),text:t("blog.localization_text")},{id:4,title:t("blog.api_title"),text:t("blog.api_text")},{id:5,title:t("blog.save_title"),text:t("blog.save_text")},{id:6,title:t("blog.css_title"),text:t("blog.css_text")}]);return(a,i)=>{const c=le,r=ue;return _(),p("div",he,[e("h2",null,u(h(t)("common.subitile")),1),m(r,{class:"weather-blog__accordion"},{default:C(()=>[(_(!0),p(L,null,F(h(n),l=>(_(),k(c,{item:l,key:l.id},{title:C(()=>[S(u(l.title),1)]),default:C(()=>[S(" "+u(l.text),1)]),_:2},1032,["item"]))),128))]),_:1})])}}};const me={__name:"WeatherSettings",setup(s){const{$emitter:t}=A(),n=()=>{t.emit("showSettingModal")};return(a,i)=>{const c=B;return _(),p("button",{class:"setting",onClick:n},[m(c,{name:"gear",width:"28",height:"28",class:"setting__gear"})])}}},H=g(me,[["__scopeId","data-v-6fe50f00"]]);const ve={class:"panel"},fe={class:"panel__content"},ge={class:"panel__item"},ye={class:"panel__value"},$e={class:"panel__item"},we={class:"panel__value"},xe={class:"panel__item"},be={class:"panel__value"},Ce={__name:"WeatherPanel",props:{wind:{type:Number,default:0},humidity:{type:Number,default:0},pressure:{type:Number,default:0}},setup(s){const t=s,n=x(()=>Math.floor(t.pressure*.75)),a=x(()=>Math.floor(t.wind)),i=x(()=>Math.floor(t.humidity));return(c,r)=>{const l=B;return _(),p("div",ve,[e("div",fe,[e("div",ge,[m(l,{name:"humidity",width:"18",height:"18",class:"panel__icon"}),e("div",ye,u(h(i))+"%",1)]),e("div",$e,[m(l,{name:"preassure",width:"18",height:"18",class:"panel__icon"}),e("div",we,u(h(n)),1),S(" mmHg ")]),e("div",xe,[m(l,{name:"wind",width:"18",height:"18",class:"panel__icon"}),e("div",be,u(h(a)),1),S(" m/s ")])])])}}},ke=g(Ce,[["__scopeId","data-v-dbeeab7d"]]);const Se={class:"weather-card"},Ie={class:"weather-card__content"},We={class:"weather-card__header"},Ee={class:"weather-card__city"},Me={class:"weather-card__country"},Ae={class:"weather-card__main"},Be={class:"weather-card__picture"},Te=["src"],Ne={class:"weather-card__temperature"},ze={lass:"weather-card-card__condition"},Le={class:"weather-card__max"},Fe={__name:"WeatherCard",props:{item:{type:Object,default:()=>({})},isFirst:{type:Boolean,default:!1}},setup(s){return(t,n)=>{const a=B,i=H,c=ke;return _(),p("div",Se,[e("div",Ie,[e("div",We,[m(a,{name:"map",width:"24",height:"24",class:"weather-card__map"}),e("div",Ee,u(s.item.city)+",",1),e("div",Me,u(s.item.countryCode),1),s.isFirst?(_(),k(i,{key:0,class:"weather-card__setting"})):M("",!0)]),e("div",Ae,[e("div",Be,[e("img",{src:`icons/${s.item.weatherIcon}.svg`,alt:"user",class:"weather-card__type"},null,8,Te)]),e("div",Ne,u(s.item.temperature)+"°C",1),e("span",ze,u(s.item.condition),1),e("div",Le," Max.: "+u(s.item.maxTemp)+"°C Min.: "+u(s.item.minTemp)+"°C ",1),m(c,{humidity:s.item.main.humidity,pressure:s.item.main.pressure,wind:s.item.wind.speed},null,8,["humidity","pressure","wind"])])])])}}},He=g(Fe,[["__scopeId","data-v-aacddaa1"]]);const Pe={},Ve={class:"empty"},je={class:"empty__content"},Ge={class:"empty__header"},Re={class:"empty__main"};function De(s,t){const n=H;return _(),p("div",Ve,[e("div",je,[e("div",Ge,[m(n,{class:"empty__setting"})]),e("div",Re,u(s.$t("common.no_data")),1)])])}const qe=g(Pe,[["render",De],["__scopeId","data-v-a7f84fe6"]]);const Oe={class:"weather"},Je={class:"weather__header"},Ke={class:"weather__title"},Qe={class:"weather__wrapper"},Ue={class:"weather__blog"},Xe={class:"weather__cards"},Ye="metric",Ze={__name:"Weather",setup(s){const{locale:t}=N(),{$request:n,$t:a}=A(),i=Y(),c=U(),r=y([]),l=y([]),I=(d,v,f,$,w)=>{n({method:"GET",url:`${i.public.base_url}/weather?lat=${$}&lon=${w}&lang=${t.value}&appid=${i.public.api_key}&units=${Ye}`,msg:a("common.weather_loaded",{cityName:d})}).then(o=>{r.value.push({...o,id:f,city:d,countryCode:v,temperature:Math.floor(o.main.temp),condition:o.weather[0].description,maxTemp:Math.floor(o.main.temp_max),minTemp:Math.floor(o.main.temp_min),weatherIcon:o.weather[0].icon})})};return X(()=>{localStorage.getItem("cities")||n({method:"GET",url:`${i.public.ip_url}?format=json`}).then(d=>{const v=d.ip;n({method:"GET",url:`${i.public.cities_url}/network?ip=${v}`,headers:{"Content-type":"application/json",Authorization:i.public.cities_key}}).then(f=>{c.setCities([{city:f.region}])})})}),E(()=>[c.currentCities,t.value],()=>{r.value=[],c.currentCities.forEach(d=>{I(d.city.name,d.city.countryCode,d.city.id,d.city.latitude,d.city.longitude)})},{immediate:!0}),E(()=>r.value,()=>{l.value=[],c.currentCities.forEach(d=>{const v=r.value.find(f=>f.id===d.city.id);v&&l.value.push(v)})},{deep:!0}),(d,v)=>{const f=oe,$=pe,w=He,o=qe;return _(),p("div",Oe,[e("div",Je,[e("h1",Ke,u(h(a)("common.title")),1),m(f,{class:"weather__switcher"})]),e("div",Qe,[e("section",Ue,[m($)]),e("div",Xe,[(_(!0),p(L,null,F(h(l),(T,P)=>(_(),k(w,{item:T,isFirst:P===0},null,8,["item","isFirst"]))),256)),h(l).length?M("",!0):(_(),k(o,{key:0}))])])])}}},et=g(Ze,[["__scopeId","data-v-5d4676ef"]]);const tt={},st={class:"page"};function nt(s,t){const n=et;return _(),p("div",st,[m(n)])}const ct=g(tt,[["render",nt]]);export{ct as default};
